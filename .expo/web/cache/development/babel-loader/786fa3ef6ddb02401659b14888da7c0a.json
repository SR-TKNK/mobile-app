{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\PC\\\\Documents\\\\hocnhieuchut\\\\reactnative\\\\mobile-app\\\\screens\\\\CartScreens\\\\FromInfo.js\";\nimport React, { useEffect, useState } from 'react';\nimport axios from \"axios\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Linking from \"react-native-web/dist/exports/Linking\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport QrCode from \"../../assets/qr.png\";\nimport { useNavigation } from '@react-navigation/native';\nvar ip = \"http://192.168.1.103\";\nvar currentLocation = ip + \":3000/api\";\nexport default function Payment(_ref) {\n  var route = _ref.route;\n  var _route$params = route.params,\n      cart = _route$params.cart,\n      method = _route$params.method;\n  console.log(cart);\n\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      name = _React$useState2[0],\n      onChangeName = _React$useState2[1];\n\n  var _React$useState3 = React.useState(null),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      number = _React$useState4[0],\n      onChangeNumber = _React$useState4[1];\n\n  var _React$useState5 = React.useState(null),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      address = _React$useState6[0],\n      onChangeAddress = _React$useState6[1];\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      idOrder = _useState2[0],\n      setIdOrder = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      modalVisible = _useState4[0],\n      setModalVisible = _useState4[1];\n\n  var navigation = useNavigation();\n\n  function fetchOrder() {\n    axios.get(currentLocation + \"/orders\").then(function (res) {\n      var id = res.data.length + 1;\n      console.log(res.data);\n      setIdOrder(id);\n      var order = {\n        id: id,\n        products: cart,\n        status: \"Chờ giao hàng\",\n        user: {\n          username: 'ndt123',\n          name: name,\n          number: number,\n          address: address\n        }\n      };\n      axios.post(currentLocation + \"/orders\", order);\n    }).catch(function (error) {\n      return console.log(error);\n    });\n\n    for (var i in cart) {\n      axios.delete(currentLocation + \"/cart/\" + cart[i].id);\n    }\n  }\n\n  function handleOrder(method) {\n    if (name == null || number == null || address == null) {\n      Alert.alert(\"Vui lòng điền đầy đủ thông tin\");\n    } else {\n      if (method == \"paypal\") {\n        fetchOrder();\n        Linking.openURL(window.location.protocol + \"//\" + window.location.hostname + \":5000?id=\" + idOrder);\n      }\n\n      if (method == \"cash\") {\n        fetchOrder();\n      }\n\n      if (method == \"qr\") {\n        fetchOrder();\n        navigation.navigate('QrCode', {\n          id: idOrder,\n          name: name,\n          number: number,\n          address: address\n        });\n      }\n    }\n  }\n\n  ;\n  return React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    style: {\n      padding: 16\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, \"H\\u1ECD v\\xE0 t\\xEAn\"), React.createElement(TextInput, {\n    style: styles.input,\n    onChangeText: onChangeName,\n    value: name,\n    placeholder: \"H\\u1ECD v\\xE0 t\\xEAn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }), React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\"), React.createElement(TextInput, {\n    style: styles.input,\n    onChangeText: onChangeNumber,\n    value: number,\n    keyboardType: \"numeric\",\n    placeholder: \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }), React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, \"\\u0110\\u1ECBa ch\\u1EC9\"), React.createElement(TextInput, {\n    style: styles.input,\n    onChangeText: onChangeAddress,\n    value: address,\n    placeholder: \"\\u0110\\u1ECBa ch\\u1EC9\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  })), React.createElement(View, {\n    style: styles.footer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }\n  }, React.createElement(TouchableOpacity, {\n    activeOpacity: 1,\n    onPress: function onPress() {\n      return handleOrder(method, cart);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.order,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    style: {\n      textAlign: 'center',\n      fontWeight: 'bold'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }, \"\\u0110\\u1EB6T H\\xC0NG\")))), React.createElement(Modal, {\n    animationType: \"slide\",\n    transparent: true,\n    visible: modalVisible,\n    onRequestClose: function onRequestClose() {\n      setModalVisible(!modalVisible);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: styles.centeredView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.modalView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 11\n    }\n  }, React.createElement(Image, {\n    source: QrCode,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }), React.createElement(Pressable, {\n    style: [styles.button, styles.buttonClose],\n    onPress: function onPress() {\n      return handleQr();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    style: styles.textStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 15\n    }\n  }, \"\\u0110\\xE3 thanh to\\xE1n\"))))));\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    paddingTop: 8,\n    paddingHorizontal: 8,\n    paddingBottom: 32\n  },\n  content: {\n    marginBottom: 8,\n    padding: 8\n  },\n  default: {\n    borderColor: '#ccc',\n    borderWidth: 0.5\n  },\n  select: {\n    borderColor: '#ff9999',\n    backgroundColor: '#ff9999'\n  },\n  title: {\n    color: '#ff9999',\n    fontWeight: 'bold',\n    fontSize: 18,\n    marginBottom: 8\n  },\n  footer: {\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    right: 0\n  },\n  order: {\n    backgroundColor: \"#ff4d4d\",\n    paddingVertical: 16\n  },\n  input: {\n    height: 40,\n    marginVertical: 12,\n    borderWidth: 1,\n    padding: 10\n  },\n  centeredView: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  modalView: {\n    backgroundColor: \"white\",\n    borderRadius: 20,\n    padding: 35,\n    alignItems: \"center\",\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 4,\n    elevation: 5\n  },\n  button: {\n    borderRadius: 20,\n    padding: 10,\n    elevation: 2\n  },\n  buttonOpen: {\n    backgroundColor: \"#F194FF\"\n  },\n  buttonClose: {\n    backgroundColor: \"#2196F3\"\n  },\n  textStyle: {\n    color: \"white\",\n    fontWeight: \"bold\",\n    textAlign: \"center\"\n  },\n  modalText: {\n    marginBottom: 15,\n    textAlign: \"center\"\n  }\n});","map":{"version":3,"sources":["C:/Users/PC/Documents/hocnhieuchut/reactnative/mobile-app/screens/CartScreens/FromInfo.js"],"names":["React","useEffect","useState","axios","QrCode","useNavigation","ip","currentLocation","Payment","route","params","cart","method","console","log","name","onChangeName","number","onChangeNumber","address","onChangeAddress","idOrder","setIdOrder","modalVisible","setModalVisible","navigation","fetchOrder","get","then","res","id","data","length","order","products","status","user","username","post","catch","error","i","delete","handleOrder","Alert","alert","Linking","openURL","window","location","protocol","hostname","navigate","styles","container","padding","input","footer","textAlign","fontWeight","centeredView","modalView","button","buttonClose","handleQr","textStyle","StyleSheet","create","flex","backgroundColor","paddingTop","paddingHorizontal","paddingBottom","content","marginBottom","default","borderColor","borderWidth","select","title","color","fontSize","position","bottom","left","right","paddingVertical","height","marginVertical","justifyContent","alignItems","borderRadius","shadowColor","shadowOffset","width","shadowOpacity","shadowRadius","elevation","buttonOpen","modalText"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from \"axios\";\r\nimport { View, Text, TouchableOpacity, TextInput, Linking, StyleSheet, Button, Image } from \"react-native\";\r\nimport { Alert, Modal, Pressable } from \"react-native\";\r\nimport QrCode from '../../assets/qr.png'\r\nimport { useNavigation } from '@react-navigation/native';\r\n\r\nconst ip = \"http://192.168.1.103\";\r\nconst currentLocation = `${ip}:3000/api`;\r\n\r\nexport default function Payment({ route }) {\r\n  const { cart, method } = route.params;\r\n  console.log(cart);\r\n  const [name, onChangeName] = React.useState(null);\r\n  const [number, onChangeNumber] = React.useState(null);\r\n  const [address, onChangeAddress] = React.useState(null);\r\n  const [idOrder, setIdOrder] = useState();\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n  const navigation = useNavigation();\r\n\r\n  function fetchOrder() {\r\n    axios.get(`${currentLocation}/orders`)\r\n      .then(res => {\r\n        const id = res.data.length + 1;\r\n        console.log(res.data);\r\n        setIdOrder(id);\r\n        const order = {\r\n          id: id,\r\n          products: cart,\r\n          status: \"Chờ giao hàng\",\r\n          user: {\r\n            username: 'ndt123',\r\n            name: name,\r\n            number: number,\r\n            address: address\r\n          }\r\n        }\r\n        axios.post(`${currentLocation}/orders`, order);\r\n      })\r\n      .catch(error => console.log(error));\r\n    for (const i in cart)\r\n      axios.delete(`${currentLocation}/cart/${cart[i].id}`);\r\n\r\n  }\r\n\r\n  function handleOrder(method) {\r\n    if (name == null || number == null || address == null) {\r\n      Alert.alert(\"Vui lòng điền đầy đủ thông tin\");\r\n    } else {\r\n      if (method == \"paypal\") {\r\n        fetchOrder();\r\n        Linking.openURL(`${window.location.protocol}//${window.location.hostname}:5000?id=${idOrder}`);\r\n      }\r\n      if (method == \"cash\") {\r\n        fetchOrder();\r\n      }\r\n      if (method == \"qr\") {\r\n        fetchOrder();\r\n        navigation.navigate('QrCode', {\r\n          id: idOrder,\r\n          name: name,\r\n          number: number,\r\n          address: address\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <View style={{ padding: 16 }}>\r\n        <Text>Họ và tên</Text>\r\n        <TextInput\r\n          style={styles.input}\r\n          onChangeText={onChangeName}\r\n          value={name}\r\n          placeholder=\"Họ và tên\"\r\n        />\r\n        <Text>Số điện thoại</Text>\r\n        <TextInput\r\n          style={styles.input}\r\n          onChangeText={onChangeNumber}\r\n          value={number}\r\n          keyboardType=\"numeric\"\r\n          placeholder=\"Số điện thoại\"\r\n        />\r\n        <Text>Địa chỉ</Text>\r\n        <TextInput\r\n          style={styles.input}\r\n          onChangeText={onChangeAddress}\r\n          value={address}\r\n          placeholder=\"Địa chỉ\"\r\n        />\r\n      </View>\r\n      <View style={styles.footer}>\r\n        <TouchableOpacity\r\n          activeOpacity={1}\r\n          onPress={() => handleOrder(method, cart)}\r\n        >\r\n          <View style={styles.order}>\r\n            <Text style={{ textAlign: 'center', fontWeight: 'bold' }}>ĐẶT HÀNG</Text>\r\n          </View>\r\n        </TouchableOpacity>\r\n      </View>\r\n      <Modal\r\n        animationType=\"slide\"\r\n        transparent={true}\r\n        visible={modalVisible}\r\n        onRequestClose={() => {\r\n          setModalVisible(!modalVisible);\r\n        }}\r\n      >\r\n        <View style={styles.centeredView}>\r\n          <View style={styles.modalView}>\r\n            <Image source={QrCode} />\r\n            <Pressable\r\n              style={[styles.button, styles.buttonClose]}\r\n              onPress={() => handleQr()}\r\n            >\r\n              <Text style={styles.textStyle}>Đã thanh toán</Text>\r\n            </Pressable>\r\n          </View>\r\n\r\n        </View>\r\n      </Modal>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n    paddingTop: 8,\r\n    paddingHorizontal: 8,\r\n    paddingBottom: 32\r\n  },\r\n  content: {\r\n    marginBottom: 8,\r\n    padding: 8\r\n  },\r\n  default: {\r\n    borderColor: '#ccc',\r\n    borderWidth: 0.5\r\n  },\r\n  select: {\r\n    borderColor: '#ff9999',\r\n    backgroundColor: '#ff9999',\r\n  },\r\n  title: {\r\n    color: '#ff9999',\r\n    fontWeight: 'bold',\r\n    fontSize: 18,\r\n    marginBottom: 8\r\n  },\r\n  footer: {\r\n    position: 'absolute',\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0,\r\n  },\r\n  order: {\r\n    backgroundColor: \"#ff4d4d\",\r\n    paddingVertical: 16,\r\n  },\r\n  input: {\r\n    height: 40,\r\n    marginVertical: 12,\r\n    borderWidth: 1,\r\n    padding: 10,\r\n  },\r\n  centeredView: {\r\n    flex: 1,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\"\r\n  },\r\n  modalView: {\r\n    backgroundColor: \"white\",\r\n    borderRadius: 20,\r\n    padding: 35,\r\n    alignItems: \"center\",\r\n    shadowColor: \"#000\",\r\n    shadowOffset: {\r\n      width: 0,\r\n      height: 2\r\n    },\r\n    shadowOpacity: 0.25,\r\n    shadowRadius: 4,\r\n    elevation: 5\r\n  },\r\n  button: {\r\n    borderRadius: 20,\r\n    padding: 10,\r\n    elevation: 2\r\n  },\r\n  buttonOpen: {\r\n    backgroundColor: \"#F194FF\",\r\n  },\r\n  buttonClose: {\r\n    backgroundColor: \"#2196F3\",\r\n  },\r\n  textStyle: {\r\n    color: \"white\",\r\n    fontWeight: \"bold\",\r\n    textAlign: \"center\"\r\n  },\r\n  modalText: {\r\n    marginBottom: 15,\r\n    textAlign: \"center\"\r\n  }\r\n});"]},"metadata":{},"sourceType":"module"}